import{j as e,A as s,B as a,F as l}from"./vendor-ui-Db6t6WVF.js";import{r}from"./vendor-react-CDe1t649.js";import{d as i,x as n,y as t,z as o}from"./index-D8KjxLH4.js";const m=({initialMode:m="login"})=>{var d;const{user:u,isAuthenticated:c}=i(),[h,x]=r.useState(m),[g,p]=r.useState(!1),[j,f]=r.useState(null),[w,b]=r.useState(null),[y,N]=r.useState({email:"",password:"",fullName:""}),v=e=>{const{name:s,value:a}=e.target;N((e=>({...e,[s]:a})))},L=async()=>{p(!0);try{const{error:e}=await n();if(e)throw new Error(e.message);b("Logged out successfully!")}catch(e){f(e.message)}finally{p(!1)}};return c?e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark mb-4",children:"Your Profile"}),j&&e.jsx(s,{variant:"error",className:"mb-4",dismissible:!0,onDismiss:()=>f(null),children:j}),w&&e.jsx(s,{variant:"success",className:"mb-4",dismissible:!0,onDismiss:()=>b(null),children:w}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Email:"})," ",u.email]}),(null==(d=u.user_metadata)?void 0:d.full_name)&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Name:"})," ",u.user_metadata.full_name]})]}),e.jsx(a,{variant:"primary",onClick:L,disabled:g,className:"w-full",children:g?"Logging out...":"Log Out"})]}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark mb-4",children:"login"===h?"Log In":"Create an Account"}),j&&e.jsx(s,{variant:"error",className:"mb-4",dismissible:!0,onDismiss:()=>f(null),children:j}),w&&e.jsx(s,{variant:"success",className:"mb-4",dismissible:!0,onDismiss:()=>b(null),children:w}),e.jsxs(l,{onSubmit:async e=>{e.preventDefault(),p(!0),f(null),b(null);try{if("login"===h){const{data:e,error:s}=await t(y.email,y.password);if(s)throw new Error(s.message);b("Logged in successfully!")}else{const{data:e,error:s}=await o(y.email,y.password,y.fullName);if(s)throw new Error(s.message);b("Registration successful! Please check your email to confirm your account.")}N({email:"",password:"",fullName:""})}catch(s){f(s.message)}finally{p(!1)}},children:["register"===h&&e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"fullName",required:!0,children:"Full Name"}),e.jsx(l.Input,{id:"fullName",name:"fullName",value:y.fullName,onChange:v,placeholder:"Enter your full name",required:!0})]}),e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"email",required:!0,children:"Email"}),e.jsx(l.Input,{id:"email",name:"email",type:"email",value:y.email,onChange:v,placeholder:"Enter your email",required:!0})]}),e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"password",required:!0,children:"Password"}),e.jsx(l.Input,{id:"password",name:"password",type:"password",value:y.password,onChange:v,placeholder:"Enter your password",required:!0})]}),e.jsx(a,{type:"submit",variant:"primary",disabled:g,className:"w-full mb-4",children:g?"login"===h?"Logging in...":"Registering...":"login"===h?"Log In":"Register"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{x("login"===h?"register":"login"),f(null),b(null)},className:"text-lemonade-blue hover:underline",children:"login"===h?"Don't have an account? Register":"Already have an account? Log in"})})]})]})};export{m as A};
//# sourceMappingURL=AuthForm-BiY8VZXe.js.map
