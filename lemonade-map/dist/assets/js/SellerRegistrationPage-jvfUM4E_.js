import{j as e,C as s,F as r,B as t,L as a,A as l,P as n}from"./vendor-ui-Db6t6WVF.js";import{r as i}from"./vendor-react-CDe1t649.js";import{r as d}from"./index-BtuY4TKD.js";import"./vendor-supabase-BUo_ywwZ.js";const o=e=>{const s={};return e.name?e.name.length<2?s.name="Product name must be at least 2 characters":e.name.length>50&&(s.name="Product name must be less than 50 characters"):s.name="Product name is required",e.description?e.description.length<10?s.description="Description must be at least 10 characters":e.description.length>500&&(s.description="Description must be less than 500 characters"):s.description="Product description is required",e.price?isNaN(parseFloat(e.price))?s.price="Price must be a number":parseFloat(e.price)<=0?s.price="Price must be greater than 0":parseFloat(e.price)>100&&(s.price="Price must be less than $100"):s.price="Price is required",s},c={name:"",address:"",location_lat:null,location_lng:null,products:[{name:"",description:"",price:"",image:null,imagePreview:null}]},m=({onSubmit:n,loading:m=!1})=>{const[u,p]=i.useState(c),[x,h]=i.useState({}),[g,j]=i.useState(!1),[b,f]=i.useState(null),[v,y]=i.useState(!1),N=e=>{const{name:s,value:r}=e.target;p((e=>({...e,[s]:r}))),"address"===s&&p((e=>({...e,location_lat:null,location_lng:null}))),v&&h((e=>({...e,[s]:null})))},w=(e,s,r)=>{p((t=>{const a=[...t.products];return a[e]={...a[e],[s]:r},{...t,products:a}})),v&&x.products&&h((r=>{const t=[...r.products||[]];return t[e]&&(t[e]={...t[e],[s]:null}),{...r,products:t}}))};return e.jsxs(s,{className:"max-w-3xl mx-auto",children:[e.jsx(s.Header,{children:e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark",children:"Register Your Lemonade Stand"})}),e.jsx(s.Body,{children:e.jsxs(r,{onSubmit:e=>{e.preventDefault(),y(!0);const s=(e=>{const s={};if(e.name?e.name.length<2?s.name="Name must be at least 2 characters":e.name.length>50&&(s.name="Name must be less than 50 characters"):s.name="Name is required",e.address?e.address.length<5&&(s.address="Please enter a valid address"):s.address="Address is required",e.location_lat&&e.location_lng||(s.location="Location coordinates are required. Please use the geocode button."),e.products&&0!==e.products.length){const r=e.products.map(o);r.some((e=>Object.keys(e).length>0))&&(s.products=r)}else s.products="At least one product is required";return s})(u);if(h(s),(e=>!!e&&(Object.keys(e).filter((e=>"products"!==e)).length>0||!(!e.products||!Array.isArray(e.products))&&e.products.some((e=>Object.keys(e).length>0))))(s))return;const r={...u,products:u.products.map((e=>({name:e.name,description:e.description,price:parseFloat(e.price),image:e.image})))};n(r)},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-display text-lemonade-pink-dark mb-4",children:"Seller Information"}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:"name",required:!0,children:"Stand Name"}),e.jsx(r.Input,{id:"name",name:"name",value:u.name,onChange:N,placeholder:"Enter your lemonade stand name",error:x.name})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:"address",required:!0,children:"Address"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(r.Input,{id:"address",name:"address",value:u.address,onChange:N,placeholder:"Enter your stand's address",error:x.address})}),e.jsx(t,{type:"button",variant:"secondary",onClick:async()=>{if(u.address){j(!0),f(null);try{const e=await d(u.address);if(!e)return void f("Could not find coordinates for this address. Please try a different address.");p((s=>({...s,location_lat:e.lat,location_lng:e.lng}))),x.location&&h((e=>({...e,location:null})))}catch(e){f(e.message)}finally{j(!1)}}else f("Please enter an address first")},disabled:!u.address||g,className:"whitespace-nowrap",children:g?e.jsx(a,{size:"sm",variant:"white"}):"Geocode Address"})]}),b&&e.jsx(l,{variant:"error",className:"mt-2",children:b}),x.location&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.location}),u.location_lat&&u.location_lng&&e.jsxs("div",{className:"mt-2 p-2 bg-green-100 text-green-800 rounded-md text-sm",children:[e.jsx("span",{className:"font-semibold",children:"✓ Location verified:"})," ",u.location_lat.toFixed(6),", ",u.location_lng.toFixed(6)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-display text-lemonade-pink-dark",children:"Products"}),u.products.length<2&&e.jsx(t,{type:"button",size:"sm",variant:"outline",onClick:()=>{u.products.length>=2||p((e=>({...e,products:[...e.products,{name:"",description:"",price:"",image:null,imagePreview:null}]})))},children:"Add Product"})]}),x.products&&!Array.isArray(x.products)&&e.jsx(l,{variant:"error",className:"mb-4",children:x.products}),u.products.map(((s,a)=>{var l,n,i,d;return e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-display text-lg",children:["Product ",a+1]}),u.products.length>1&&e.jsx(t,{type:"button",size:"sm",variant:"ghost",onClick:()=>(e=>{p((s=>({...s,products:s.products.filter(((s,r)=>r!==e))}))),x.products&&h((s=>({...s,products:s.products.filter(((s,r)=>r!==e))})))})(a),children:"Remove"})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:`product-${a}-name`,required:!0,children:"Product Name"}),e.jsx(r.Input,{id:`product-${a}-name`,value:s.name,onChange:e=>w(a,"name",e.target.value),placeholder:"e.g., Classic Lemonade",error:x.products&&(null==(l=x.products[a])?void 0:l.name)})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:`product-${a}-description`,required:!0,children:"Description"}),e.jsx(r.Textarea,{id:`product-${a}-description`,value:s.description,onChange:e=>w(a,"description",e.target.value),placeholder:"Describe your product...",rows:3,error:x.products&&(null==(n=x.products[a])?void 0:n.description)})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:`product-${a}-price`,required:!0,children:"Price ($)"}),e.jsx(r.Input,{id:`product-${a}-price`,type:"number",min:"0.01",step:"0.01",value:s.price,onChange:e=>w(a,"price",e.target.value),placeholder:"0.00",error:x.products&&(null==(i=x.products[a])?void 0:i.price)})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{htmlFor:`product-${a}-image`,children:"Product Image"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("input",{type:"file",id:`product-${a}-image`,accept:"image/*",onChange:e=>((e,s)=>{const r=s.target.files[0];if(!r)return;const t=new FileReader;t.onloadend=()=>{w(e,"imagePreview",t.result)},t.readAsDataURL(r),w(e,"image",r)})(a,e),className:"block w-full text-sm text-gray-500\n                          file:mr-4 file:py-2 file:px-4\n                          file:rounded-full file:border-0\n                          file:text-sm file:font-semibold\n                          file:bg-lemonade-blue-light file:text-lemonade-blue-dark\n                          hover:file:bg-lemonade-blue-dark hover:file:text-white\n                          file:cursor-pointer file:transition-colors"}),x.products&&(null==(d=x.products[a])?void 0:d.image)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.products[a].image}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional. Max size: 5MB. Formats: JPEG, PNG, WebP"})]}),s.imagePreview&&e.jsxs("div",{className:"w-20 h-20 relative",children:[e.jsx("img",{src:s.imagePreview,alt:"Preview",className:"w-full h-full object-cover rounded-md"}),e.jsx("button",{type:"button",className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",onClick:()=>{w(a,"image",null),w(a,"imagePreview",null)},children:"×"})]})]})]})]},a)}))]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>{p(c),h({}),f(null),y(!1)},disabled:m,children:"Reset Form"}),e.jsx(t,{type:"submit",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(a,{size:"sm",variant:"white",className:"mr-2"}),"Submitting..."]}):"Register Stand"})]})]})})]})};m.propTypes={onSubmit:n.func.isRequired,loading:n.bool};const u=()=>{const[r,t]=i.useState(!1),[a,n]=i.useState(!1),[d,o]=i.useState(null),[c,u]=i.useState(null);return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-display text-lemonade-blue-dark mb-6",children:"Seller Registration"}),d&&e.jsx(l,{variant:"error",className:"mb-6",children:d}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{variant:"success",title:"Registration Successful!",children:"Your lemonade stand has been registered successfully. You can now manage your stand and products."}),e.jsxs(s,{children:[e.jsx(s.Header,{children:e.jsx("h2",{className:"text-xl font-display",children:"Registration Details"})}),e.jsx(s.Body,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Stand Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",c.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",c.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",c.location_lat.toFixed(6),", ",c.location_lng.toFixed(6)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Products"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:c.products.map(((r,t)=>e.jsxs(s,{variant:"yellow",className:"h-full",children:[e.jsx(s.Header,{children:e.jsx("h4",{className:"font-display",children:r.name})}),r.imagePreview&&e.jsx("img",{src:r.imagePreview,alt:r.name,className:"w-full h-40 object-cover"}),e.jsxs(s.Body,{children:[e.jsx("p",{className:"text-sm mb-2",children:r.description}),e.jsxs("p",{className:"font-bold text-lemonade-blue-dark",children:["$",parseFloat(r.price).toFixed(2)]})]})]},t)))})]})]})}),e.jsx(s.Footer,{children:e.jsx("button",{className:"px-4 py-2 bg-lemonade-yellow text-gray-800 rounded-lg font-display hover:bg-lemonade-yellow-dark transition-colors",onClick:()=>{n(!1),u(null)},children:"Register Another Stand"})})]})]}):e.jsx(m,{onSubmit:async e=>{t(!0),o(null);try{await new Promise((e=>setTimeout(e,1500))),u(e),n(!0)}catch(s){o("Failed to register your stand. Please try again.")}finally{t(!1)}},loading:r})]})};export{u as default};
//# sourceMappingURL=SellerRegistrationPage-jvfUM4E_.js.map
