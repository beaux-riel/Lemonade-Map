import{j as e,A as s,B as a,F as l}from"./vendor-ui-DsK07F6c.js";import{d as r,r as i}from"./vendor-react-qVBsGM6v.js";import{d as n,A as t,B as o,C as d}from"./index-CUO_pGjF.js";const m=({initialMode:m="login"})=>{var u;const{user:c,isAuthenticated:h}=n(),x=r(),[g,p]=i.useState(m),[j,f]=i.useState(!1),[w,b]=i.useState(null),[y,N]=i.useState(null),[v,L]=i.useState({email:"",password:"",fullName:""}),E=e=>{const{name:s,value:a}=e.target;L((e=>({...e,[s]:a})))},C=async()=>{f(!0);try{const{error:e}=await t();if(e)throw new Error(e.message);N("Logged out successfully!")}catch(e){b(e.message)}finally{f(!1)}};return h?e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark mb-4",children:"Your Profile"}),w&&e.jsx(s,{variant:"error",className:"mb-4",dismissible:!0,onDismiss:()=>b(null),children:w}),y&&e.jsx(s,{variant:"success",className:"mb-4",dismissible:!0,onDismiss:()=>N(null),children:y}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Email:"})," ",c.email]}),(null==(u=c.user_metadata)?void 0:u.full_name)&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Name:"})," ",c.user_metadata.full_name]})]}),e.jsx(a,{variant:"primary",onClick:C,disabled:j,className:"w-full",children:j?"Logging out...":"Log Out"})]}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark mb-4",children:"login"===g?"Log In":"Create an Account"}),w&&e.jsx(s,{variant:"error",className:"mb-4",dismissible:!0,onDismiss:()=>b(null),children:w}),y&&e.jsx(s,{variant:"success",className:"mb-4",dismissible:!0,onDismiss:()=>N(null),children:y}),e.jsxs(l,{onSubmit:async e=>{e.preventDefault(),f(!0),b(null),N(null);try{if("login"===g){const{data:e,error:s}=await o(v.email,v.password);if(s)throw new Error(s.message);N("Logged in successfully!"),x("/seller/dashboard")}else{const{data:e,error:s}=await d(v.email,v.password,v.fullName);if(s)throw new Error(s.message);N("Registration successful! Please check your email to confirm your account.")}L({email:"",password:"",fullName:""})}catch(s){b(s.message)}finally{f(!1)}},children:["register"===g&&e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"fullName",required:!0,children:"Full Name"}),e.jsx(l.Input,{id:"fullName",name:"fullName",value:v.fullName,onChange:E,placeholder:"Enter your full name",required:!0})]}),e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"email",required:!0,children:"Email"}),e.jsx(l.Input,{id:"email",name:"email",type:"email",value:v.email,onChange:E,placeholder:"Enter your email",required:!0})]}),e.jsxs(l.Group,{children:[e.jsx(l.Label,{htmlFor:"password",required:!0,children:"Password"}),e.jsx(l.Input,{id:"password",name:"password",type:"password",value:v.password,onChange:E,placeholder:"Enter your password",required:!0})]}),e.jsx(a,{type:"submit",variant:"primary",disabled:j,className:"w-full mb-4",children:j?"login"===g?"Logging in...":"Registering...":"login"===g?"Log In":"Register"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{p("login"===g?"register":"login"),b(null),N(null)},className:"text-lemonade-blue hover:underline",children:"login"===g?"Don't have an account? Register":"Already have an account? Log in"})})]})]})};export{m as A};
//# sourceMappingURL=AuthForm-BEbNCBI2.js.map
