const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/NearbyStandsList-C8tf8FDp.js","assets/js/vendor-ui-CJnRkr8k.js","assets/js/vendor-react-gkcTQpZ_.js","assets/js/vendor-leaflet-CnX7MzVf.js","assets/js/index-Dn25iEAH.js","assets/js/vendor-supabase-8AYXEB3l.js","assets/css/index-CCk4B5HF.css"])))=>i.map(i=>d[i]);
import{P as e,j as s,C as l,a,B as t,A as n,b as i,F as r}from"./vendor-ui-CJnRkr8k.js";import{M as d}from"./Map-DalCd89t.js";import{a as o,L as c}from"./vendor-react-gkcTQpZ_.js";import{g as m,f as x,u,a as h,b as f,R as p,c as g,d as j}from"./index-Dn25iEAH.js";import{_ as b}from"./vendor-supabase-8AYXEB3l.js";import"./vendor-leaflet-CnX7MzVf.js";e.bool,e.func,e.func,e.func,e.string;const v=({stand:e,onViewProducts:n,onClose:i,className:r="",...d})=>e?s.jsxs(l,{className:`w-full ${r}`,variant:"yellow",hover:!1,...d,children:[s.jsxs(l.Header,{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg md:text-xl font-display text-lemonade-yellow-dark truncate",children:e.name}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:e.address})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1 md:gap-2 ml-2",children:[s.jsx(a,{variant:"yellow",className:"text-xs md:text-sm",children:"Open"}),null!==e.distance&&void 0!==e.distance&&s.jsx(a,{variant:"blue",className:"text-xs md:text-sm",children:m(e.distance)})]})]}),s.jsxs(l.Body,{children:[e.image_url&&s.jsx("div",{className:"relative w-full h-32 md:h-48 mb-4",children:o.useMemo((()=>{const l=((e,s=400)=>e?e.includes("cloudinary.com")?e.replace("/upload/",`/upload/w_${s},q_auto,f_auto/`):e.startsWith("/")?`${e}?width=${s}`:e:"")(e.image_url,window.innerWidth<768?320:480),a=((e="Image not available",s="F8E8A2",l="333333")=>`data:image/svg+xml;base64,${btoa(`\n    <svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200">\n      <rect width="300" height="200" fill="#${s}"/>\n      <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#${l}">${e}</text>\n    </svg>\n  `)}`)(e.name);return s.jsx("img",{src:l,alt:e.name,className:"w-full h-full object-cover rounded-lg",loading:"lazy",decoding:"async",fetchpriority:"low",sizes:"(max-width: 768px) 320px, 480px",onError:e=>{e.target.onerror=null,e.target.src=a}})}),[e.image_url,e.name])}),s.jsx("p",{className:"text-sm md:text-base text-gray-700",children:e.description}),s.jsxs("div",{className:"mt-3 md:mt-4 flex items-center text-xs md:text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),s.jsx("span",{children:null!==e.distance&&void 0!==e.distance?x(e.distance,"miles"):"Distance unknown"})]})]}),s.jsxs(l.Footer,{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[s.jsx(t,{variant:"outline",onClick:i,size:"sm",className:"w-full sm:w-auto text-sm",children:"Back to Map"}),n&&s.jsx(t,{variant:"primary",onClick:()=>n(e),size:"sm",className:"w-full sm:w-auto text-sm",children:"View Products"})]})]}):null;v.propTypes={stand:e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,address:e.string,image_url:e.string,distance:e.number}),onViewProducts:e.func,onClose:e.func,className:e.string},e.arrayOf(e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,location_lat:e.number.isRequired,location_lng:e.number.isRequired,address:e.string,image_url:e.string})),e.bool,e.func,e.func,e.string;const y=o.lazy((()=>b((()=>Promise.resolve().then((()=>k))),void 0))),N=o.lazy((()=>b((()=>import("./NearbyStandsList-C8tf8FDp.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),w=({mapHeight:e="calc(100vh - 200px)"})=>{const{stands:l,loading:a,error:r}=u(),{location:c,getLocation:m,error:x}=h(),{nearbyStands:g}=f(),[j,b]=o.useState(null),[v,w]=o.useState([40.7128,-74.006]),[S,_]=o.useState(13),[k,L]=o.useState("all"),[C,R]=o.useState(null);o.useEffect((()=>{R(r||(x&&"nearby"===k?x:null))}),[r,x,k]);const q=e=>{b(e),w([e.location_lat,e.location_lng]),_(16)},M=o.useMemo((()=>"nearby"===k?g:l),[k,g,l]),F=s.jsxs(s.Fragment,{children:[s.jsx(d,{stands:M,center:v,zoom:S,height:e,showUserLocation:!0,onStandClick:q,onUserLocationFound:e=>{!e||v[0]===e.lat&&v[1]===e.lng||w([e.lat,e.lng])},className:a?"opacity-60":""}),a&&s.jsx("div",{className:"flex justify-center mt-4",children:s.jsx(i,{size:"lg",variant:"yellow",showLabel:!0,label:"Loading lemonade stands..."})})]}),z=()=>s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(i,{size:"md",variant:"yellow",showLabel:!0,label:"Loading..."})}),$=o.useMemo((()=>l),[l]),A=s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex mb-4",children:[s.jsx(t,{variant:"all"===k?"primary":"outline",className:"flex-1 rounded-r-none",onClick:()=>L("all"),children:"All Stands"}),s.jsx(t,{variant:"nearby"===k?"primary":"outline",className:"flex-1 rounded-l-none",onClick:()=>{L("nearby"),c||m()},children:"Near You"})]}),s.jsx("div",{className:"flex-grow",children:s.jsx(o.Suspense,{fallback:s.jsx(z,{}),children:"all"===k?s.jsx(y,{stands:$,loading:a,selectedStand:j,onStandSelect:q,onStandClose:()=>{b(null),w(c?[c.lat,c.lng]:[40.7128,-74.006]),_(13)},userLocation:c,className:"h-full"}):s.jsx(N,{onStandSelect:q,className:"h-full"})})})]});return s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsxs("div",{className:"mb-4 flex-shrink-0",children:[s.jsx("h1",{className:"text-3xl font-display text-lemonade-blue-dark mb-2",children:"Discover Lemonade Stands Near You"}),s.jsx("p",{className:"text-gray-600",children:"Browse the map to discover refreshing lemonade stands in your area"})]}),C&&s.jsx(n,{variant:"error",className:"mb-4 flex-shrink-0",dismissible:!0,onDismiss:()=>R(null),children:C}),s.jsx("div",{className:"flex-1 flex",children:s.jsx(p,{mapComponent:s.jsx("div",{className:"h-full w-full",children:F}),sidebarComponent:s.jsx("div",{className:"h-full",children:A})})})]})},S=({product:e,className:t="",...n})=>e?s.jsx(l,{className:`w-full ${t}`,variant:"white",hover:!1,...n,children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.image_url&&s.jsx("div",{className:"sm:w-1/3 flex-shrink-0",children:s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-28 sm:h-32 md:h-full object-cover rounded-t-lg sm:rounded-l-lg sm:rounded-t-none"})}),s.jsxs("div",{className:"p-3 sm:p-4 flex-1 "+(e.image_url?"sm:w-2/3":"sm:w-full"),children:[s.jsxs("div",{className:"flex justify-between items-start mb-1 sm:mb-2",children:[s.jsx("h3",{className:"text-base sm:text-lg font-display text-lemonade-blue-dark truncate max-w-[70%]",children:e.name}),s.jsxs(a,{variant:"yellow",className:"ml-2 text-xs sm:text-sm whitespace-nowrap",children:["$",parseFloat(e.price).toFixed(2)]})]}),e.description&&s.jsx("p",{className:"text-gray-700 text-xs sm:text-sm line-clamp-3",children:e.description}),s.jsx("div",{className:"flex justify-start items-center mt-2",children:!1===e.is_available?s.jsx(a,{variant:"red",className:"text-xs",children:"Sold Out"}):s.jsx(a,{variant:"green",className:"text-xs",children:"Available"})})]})]})}):null;S.propTypes={product:e.shape({id:e.string,name:e.string.isRequired,description:e.string,price:e.oneOfType([e.number,e.string]).isRequired,image_url:e.string,is_available:e.bool}).isRequired,className:e.string};const _=({stands:e=[],loading:a=!1,selectedStand:d=null,onStandSelect:c,onStandClose:u,userLocation:h=null,className:f="",...p})=>{const[j,b]=o.useState(e),[y,N]=o.useState(null),[w,_]=o.useState(""),[k,L]=o.useState(!1),[C,R]=o.useState([]),[q,M]=o.useState(!1),[F,z]=o.useState(null);o.useEffect((()=>{let s=[...e];if(null!==y&&h&&(s=g(s,y)),w.trim()){const e=w.toLowerCase();s=s.filter((s=>s.name.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e)||s.address&&s.address.toLowerCase().includes(e)))}b(s)}),[e,y,w,h]),o.useEffect((()=>{if(d){M(!0),z(null);const e=setTimeout((()=>{const e=[{id:`${d.id}-1`,name:"Classic Lemonade",description:"Our signature lemonade made with fresh lemons and organic sugar.",price:2.99,image_url:"https://images.unsplash.com/photo-1621263764928-df1444c5e859?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",is_available:!0},{id:`${d.id}-2`,name:"Strawberry Lemonade",description:"Classic lemonade infused with fresh strawberries.",price:3.49,image_url:"https://images.unsplash.com/photo-1497534446932-c925b458314e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",is_available:!0},{id:`${d.id}-3`,name:"Blueberry Mint Lemonade",description:"A refreshing blend of lemonade with blueberries and fresh mint.",price:3.99,image_url:"https://images.unsplash.com/photo-1556881286-fc6915169721?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",is_available:!1}];R(e),M(!1)}),1e3);return()=>clearTimeout(e)}R([])}),[d]);const $=()=>{N(null),_("")};return s.jsx("div",{className:`flex flex-col h-full ${f}`,...p,children:d?s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(v,{stand:d,onClose:u,className:"mb-4"}),s.jsxs(l,{className:"flex-grow overflow-auto",children:[s.jsx(l.Header,{children:s.jsx("h3",{className:"text-xl font-display text-lemonade-blue-dark",children:"Products"})}),s.jsx(l.Body,{children:q?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(i,{variant:"yellow"})}):F?s.jsx(n,{variant:"error",children:F}):C.length>0?s.jsx("div",{className:"space-y-4",children:C.map((e=>s.jsx(S,{product:e},e.id)))}):s.jsx("p",{className:"text-center py-4 text-gray-500",children:"No products available for this stand."})})]})]}):s.jsxs(l,{className:"h-full flex flex-col",children:[s.jsx(l.Header,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-display text-lemonade-blue-dark",children:"Lemonade Stands"}),s.jsx(t,{variant:"outline",size:"sm",onClick:()=>{L((e=>!e))},children:k?"Hide Filters":"Show Filters"})]})}),k&&s.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[s.jsxs(r.Group,{children:[s.jsx(r.Label,{htmlFor:"search",children:"Search"}),s.jsx(r.Input,{id:"search",placeholder:"Search by name or address",value:w,onChange:e=>{_(e.target.value)}})]}),s.jsxs(r.Group,{children:[s.jsxs(r.Label,{htmlFor:"distance",children:["Maximum Distance (",h?"miles":"unavailable",")"]}),s.jsx(r.Select,{id:"distance",value:y||"",onChange:e=>{const s=e.target.value;N(""===s?null:parseFloat(s))},disabled:!h,options:[{value:"",label:"Any distance"},{value:"1",label:"1 mile"},{value:"5",label:"5 miles"},{value:"10",label:"10 miles"},{value:"25",label:"25 miles"},{value:"50",label:"50 miles"}]}),!h&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable location services to filter by distance"})]}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx(t,{variant:"ghost",size:"sm",onClick:$,children:"Reset Filters"})})]}),s.jsx(l.Body,{className:"flex-grow overflow-auto",children:a?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(i,{variant:"yellow"})}):j.length>0?s.jsx("div",{className:"space-y-4",children:j.map((e=>s.jsxs("div",{className:"p-3 bg-lemonade-yellow-light rounded-lg cursor-pointer hover:bg-lemonade-yellow-dark transition-colors",onClick:()=>c(e),children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-display text-lg",children:e.name}),null!==e.distance&&void 0!==e.distance&&s.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded-full",children:x(e.distance,"miles")})]}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:e.address}),null!==e.distance&&void 0!==e.distance&&s.jsx("span",{className:"text-xs font-medium text-lemonade-blue-dark",children:m(e.distance)})]})]},e.id)))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No lemonade stands found."}),(null!==y||w)&&s.jsx(t,{variant:"ghost",size:"sm",onClick:$,className:"mt-2",children:"Clear Filters"})]})}),s.jsx(l.Footer,{children:s.jsxs("p",{className:"text-sm text-gray-600",children:[j.length," ",1===j.length?"stand":"stands"," found",null!==y&&h&&` within ${y} miles`]})})]})})};_.propTypes={stands:e.arrayOf(e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,address:e.string,location_lat:e.number,location_lng:e.number,image_url:e.string,distance:e.number})),loading:e.bool,selectedStand:e.object,onStandSelect:e.func.isRequired,onStandClose:e.func.isRequired,userLocation:e.shape({lat:e.number.isRequired,lng:e.number.isRequired}),className:e.string};const k=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),L=["Easily find young entrepreneurs near you","Real-time updates and locations","Community reviews and ratings","Support children learning business skills","Turn everyday walks into fun adventures"],C=()=>{const{isAuthenticated:e}=j();return s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-yellow-50 to-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-8 bg-white rounded-xl shadow-lg overflow-hidden",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/2 p-6 md:p-8",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-lemonade-blue-dark mb-4",children:"Welcome to Lemonade Map!"}),s.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Discover and support young entrepreneurs in your neighborhood. From refreshing lemonade stands to creative crafts, we're putting kids' first businesses on the map!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsx(c,{to:e?"/seller/dashboard":"/login",className:"bg-lemonade-yellow hover:bg-yellow-400 text-lemonade-blue-dark font-bold py-3 px-6 rounded-lg text-center transition-colors duration-200",children:"Add Your Stand"}),s.jsx(c,{to:"/about",className:"bg-lemonade-blue-dark hover:bg-lemonade-blue text-white font-bold py-3 px-6 rounded-lg text-center transition-colors duration-200",children:"Learn More"})]})]}),s.jsx("div",{className:"md:w-1/2 bg-yellow-100 p-6 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-md w-full\n                              flex flex-col md:flex-row items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-lemonade-blue-dark mb-4 flex items-center",children:[s.jsx("span",{className:"text-yellow-500 text-3xl mr-2",children:"★"}),"Why Lemonade Map?"]}),s.jsx("ul",{className:"space-y-3",children:L.map((e=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-yellow-500 text-lg mr-2",children:"•"}),s.jsx("span",{className:"text-gray-700",children:e})]},e)))})]}),s.jsx("div",{className:"mt-6 md:mt-0 md:ml-6 flex-shrink-0 mx-auto",children:s.jsx("img",{src:"/images/markers/lemonade-map-logo.png",alt:"Lemonade Map Logo",className:"w-64 h-64 object-contain mx-auto"})})]})})]})}),e&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-display font-bold text-lemonade-blue-dark",children:"Featured Stands Near You"}),s.jsx(c,{to:"/stands",className:"text-lemonade-blue hover:text-lemonade-blue-dark font-medium",children:"View All →"})]}),s.jsx("div",{className:"flex overflow-x-auto pb-4 gap-4 hide-scrollbar",children:["Sarah's Sweet Lemonade","Max's Marvelous Drinks","Neighborhood Refreshments"].map(((e,l)=>s.jsxs("div",{className:"min-w-[260px] bg-white p-4 rounded-lg shadow-md",children:[s.jsx("div",{className:"h-32 bg-yellow-200 rounded-md mb-3"}),s.jsx("h3",{className:"font-bold",children:e}),s.jsx("p",{className:"text-sm text-gray-600",children:0===l?"0.8 miles away":1===l?"1.2 miles away":"1.5 miles away"})]},l)))})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-8",children:s.jsx("div",{className:"h-[120%] rounded-lg overflow-hidden p-4",children:s.jsx(w,{mapHeight:"100%"})})}),s.jsxs("div",{className:"bg-yellow-100 rounded-xl p-6 text-center",children:[s.jsx("h2",{className:"text-2xl font-display font-bold text-lemonade-blue-dark mb-4",children:"Ready to Join Our Community?"}),s.jsx("p",{className:"text-gray-700 mb-6 max-w-2xl mx-auto",children:"Whether you're a young entrepreneur looking to promote your stand or a community member eager to support local kids, Lemonade Map is for you!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(c,{to:e?"/seller/dashboard":"/login",className:"bg-lemonade-yellow hover:bg-yellow-400 text-lemonade-blue-dark font-bold py-3 px-6 rounded-lg",children:"Add Your Stand"}),s.jsx(c,{to:"/about",className:"bg-lemonade-blue-dark hover:bg-lemonade-blue text-white font-bold py-3 px-6 rounded-lg",children:"Learn More"})]})]})]})})};export{C as default};
//# sourceMappingURL=HomePage-D8w5TTYO.js.map
