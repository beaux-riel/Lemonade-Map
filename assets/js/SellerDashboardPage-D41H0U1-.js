import{j as e,A as s,T as a,B as l,C as d}from"./vendor-ui-DsK07F6c.js";import{r as t,L as r}from"./vendor-react-qVBsGM6v.js";import{d as n,e as i,h as c}from"./index-CCsNotiS.js";import"./vendor-supabase-Dv6Edu65.js";const o=()=>{const{user:o}=n(),[m,x]=t.useState([]),[u,h]=t.useState([]),[j,p]=t.useState(!0),[g,b]=t.useState(null),[v,y]=t.useState("stands");return t.useEffect((()=>{(async()=>{try{p(!0);const{data:e,error:s}=await i(o.id);if(s)throw new Error(s.message);if(x(e||[]),e&&e.length>0){const s=e.map((e=>e.id)),a=[];for(const l of s){const{data:s,error:d}=await c(l);if(!d&&(s&&s.length>0)){const l=s.map((s=>{var a;return{...s,stand_name:(null==(a=e.find((e=>e.id===s.stand_id)))?void 0:a.name)||"Unknown Stand"}}));a.push(...l)}}h(a)}}catch(e){b("Failed to load your data. Please try again.")}finally{p(!1)}})()}),[o.id]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-display text-lemonade-blue-dark mb-2",children:"Seller Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your lemonade stands and products"})]}),g&&e.jsx(s,{variant:"error",className:"mb-6",dismissible:!0,onDismiss:()=>b(null),children:g}),e.jsx(a,{activeTab:v,onChange:y,tabs:[{id:"stands",label:"My Stands"},{id:"products",label:"My Products"}],className:"mb-6"}),"stands"===v&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark",children:"Your Lemonade Stands"}),e.jsx(r,{to:"/seller/stands/new",children:e.jsx(l,{variant:"primary",children:"Add New Stand"})})]}),j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lemonade-blue"})}):0===m.length?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any lemonade stands yet."}),e.jsx(r,{to:"/seller/stands/new",children:e.jsx(l,{variant:"primary",children:"Create Your First Stand"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((s=>e.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-md transition",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-lemonade-yellow-light flex items-center justify-center",children:e.jsx("span",{className:"text-lemonade-yellow-dark",children:"No Image"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-display text-lemonade-blue-dark mb-2",children:s.name}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.description||"No description"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.is_active?"Active":"Inactive"}),e.jsx(r,{to:`/seller/stands/${s.id}`,className:"text-lemonade-blue hover:underline",children:"Manage →"})]})]})]},s.id)))})]}),"products"===v&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-display text-lemonade-blue-dark",children:"Your Products"}),m.length>0&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lemonade-blue",onChange:e=>{e.target.value&&(window.location.href=`/seller/stands/${e.target.value}/products/new`)},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a stand..."}),m.map((s=>e.jsx("option",{value:s.id,children:s.name},s.id)))]}),e.jsx(l,{variant:"primary",onClick:()=>{const e=document.querySelector("select");e.value?window.location.href=`/seller/stands/${e.value}/products/new`:alert("Please select a stand first")},children:"Add New Product"})]})]}),j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lemonade-blue"})}):0===u.length?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:0===m.length?"You need to create a stand before adding products.":"You don't have any products yet."}),0===m.length?e.jsx(r,{to:"/seller/stands/new",children:e.jsx(l,{variant:"primary",children:"Create Your First Stand"})}):e.jsx(r,{to:`/seller/stands/${m[0].id}/products/new`,children:e.jsx(l,{variant:"primary",children:"Add Your First Product"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((s=>e.jsxs(d,{className:"hover:shadow-md transition",children:[e.jsx("div",{className:"h-48 bg-gray-100",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-lemonade-yellow-light flex items-center justify-center",children:e.jsx("span",{className:"text-lemonade-yellow-dark",children:"No Image"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-display text-lemonade-blue-dark mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-lemonade-blue mb-2",children:s.stand_name}),e.jsx("p",{className:"text-gray-600 mb-2 line-clamp-2",children:s.description||"No description"}),e.jsxs("p",{className:"text-lg font-semibold text-lemonade-blue-dark mb-3",children:["$",parseFloat(s.price).toFixed(2)]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(s.is_available?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.is_available?"Available":"Unavailable"}),e.jsx(r,{to:`/seller/stands/${s.stand_id}/products/${s.id}`,className:"text-lemonade-blue hover:underline",children:"Edit →"})]})]})]},s.id)))})]})]})};export{o as default};
//# sourceMappingURL=SellerDashboardPage-D41H0U1-.js.map
