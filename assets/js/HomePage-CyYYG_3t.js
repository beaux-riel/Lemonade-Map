const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/NearbyStandsList-PaBe6kUN.js","assets/js/vendor-ui-Dyuh2GWT.js","assets/js/vendor-react-B8YbCJDS.js","assets/js/vendor-leaflet-BYmSvtXk.js","assets/js/index-BBKuosUU.js","assets/js/vendor-supabase-C9cCqp-Z.js","assets/css/index-BA8T8frN.css"])))=>i.map(i=>d[i]);
import{P as e,j as s,C as l,d as a,B as t,A as n,L as i,F as r}from"./vendor-ui-Dyuh2GWT.js";import{M as d}from"./Map-DWf5S3q1.js";import{a as o,L as c}from"./vendor-react-B8YbCJDS.js";import{x as m,F as x,n as u,c as h,w as f,u as g,R as p,G as j,a as b}from"./index-BBKuosUU.js";import{_ as y}from"./vendor-supabase-C9cCqp-Z.js";import"./vendor-leaflet-BYmSvtXk.js";e.bool,e.func,e.func,e.func,e.string;const v=({stand:e,onViewProducts:n,onClose:i,className:r="",...d})=>e?s.jsxs(l,{className:`w-full ${r}`,variant:"yellow",hover:!1,...d,children:[s.jsxs(l.Header,{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg md:text-xl font-display text-lemonade-yellow-dark truncate",children:e.name}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:e.address})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1 md:gap-2 ml-2",children:[s.jsx(a,{variant:"yellow",className:"text-xs md:text-sm",children:"Open"}),null!==e.distance&&void 0!==e.distance&&s.jsx(a,{variant:"blue",className:"text-xs md:text-sm",children:m(e.distance)})]})]}),s.jsxs(l.Body,{children:[e.image_url&&s.jsx("div",{className:"relative w-full h-32 md:h-48 mb-4",children:o.useMemo((()=>{const l=((e,s=400)=>e?e.includes("cloudinary.com")?e.replace("/upload/",`/upload/w_${s},q_auto,f_auto/`):e.startsWith("/")?`${e}?width=${s}`:e:"")(e.image_url,window.innerWidth<768?320:480),a=((e="Image not available",s="F8E8A2",l="333333")=>`data:image/svg+xml;base64,${btoa(`\n    <svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200">\n      <rect width="300" height="200" fill="#${s}"/>\n      <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#${l}">${e}</text>\n    </svg>\n  `)}`)(e.name);return s.jsx("img",{src:l,alt:e.name,className:"w-full h-full object-cover rounded-lg",loading:"lazy",decoding:"async",fetchpriority:"low",sizes:"(max-width: 768px) 320px, 480px",onError:e=>{e.target.onerror=null,e.target.src=a}})}),[e.image_url,e.name])}),s.jsx("p",{className:"text-sm md:text-base text-gray-700",children:e.description}),s.jsxs("div",{className:"mt-3 md:mt-4 flex items-center text-xs md:text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),s.jsx("span",{children:null!==e.distance&&void 0!==e.distance?x(e.distance,"miles"):"Distance unknown"})]})]}),s.jsxs(l.Footer,{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[s.jsx(t,{variant:"outline",onClick:i,size:"sm",className:"w-full sm:w-auto text-sm",children:"Back to Map"}),n&&s.jsx(t,{variant:"primary",onClick:()=>n(e),size:"sm",className:"w-full sm:w-auto text-sm",children:"View Products"})]})]}):null;v.propTypes={stand:e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,address:e.string,image_url:e.string,distance:e.number}),onViewProducts:e.func,onClose:e.func,className:e.string},e.arrayOf(e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,location_lat:e.number.isRequired,location_lng:e.number.isRequired,address:e.string,image_url:e.string})),e.bool,e.func,e.func,e.string;const N=o.lazy((()=>y((()=>Promise.resolve().then((()=>L))),void 0))),w=o.lazy((()=>y((()=>import("./NearbyStandsList-PaBe6kUN.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),S=({mapHeight:e="calc(100vh - 200px)"})=>{const{stands:l,loading:a,error:r}=u(),{location:c,getLocation:m,error:x}=h(),{nearbyStands:j}=f(),{initializing:b}=g(),[y,v]=o.useState(null),[S,k]=o.useState([40.7128,-74.006]),[_,L]=o.useState(13),[C,R]=o.useState("all"),[z,F]=o.useState(null),M=a||b;o.useEffect((()=>{F(r||(x&&"nearby"===C?x:null))}),[r,x,C]);const q=e=>{v(e),k([e.location_lat,e.location_lng]),L(16)},A=o.useMemo((()=>"nearby"===C?j:l),[C,j,l]),$=s.jsxs(s.Fragment,{children:[s.jsx(d,{stands:A,center:S,zoom:_,height:e,showUserLocation:!0,onStandClick:q,onUserLocationFound:e=>{if(!e)return;const s=Math.abs(S[0]-e.lat)>.001||Math.abs(S[1]-e.lng)>.001;(!c||s)&&k([e.lat,e.lng])},className:M?"opacity-60":""}),M&&s.jsx("div",{className:"flex justify-center mt-4",children:s.jsx(i,{size:"lg",variant:"yellow",showLabel:!0,label:"Loading lemonade stands..."})})]}),E=()=>s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(i,{size:"md",variant:"yellow",showLabel:!0,label:"Loading..."})}),P=o.useMemo((()=>l),[l]),O=s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex mb-4",children:[s.jsx(t,{variant:"all"===C?"primary":"outline",className:"flex-1 rounded-r-none",onClick:()=>R("all"),children:"All Stands"}),s.jsx(t,{variant:"nearby"===C?"primary":"outline",className:"flex-1 rounded-l-none",onClick:()=>{R("nearby"),c||m()},children:"Near You"})]}),s.jsx("div",{className:"flex-grow",children:s.jsx(o.Suspense,{fallback:s.jsx(E,{}),children:"all"===C?s.jsx(N,{stands:P,loading:M,selectedStand:y,onStandSelect:q,onStandClose:()=>{v(null),k(c?[c.lat,c.lng]:[40.7128,-74.006]),L(13)},userLocation:c,className:"h-full"}):s.jsx(w,{onStandSelect:q,className:"h-full"})})})]});return s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsxs("div",{className:"mb-4 flex-shrink-0",children:[s.jsx("h1",{className:"text-3xl font-display text-lemonade-blue-dark mb-2",children:"Discover Lemonade Stands Near You"}),s.jsx("p",{className:"text-gray-600",children:"Browse the map to discover refreshing lemonade stands in your area"})]}),z&&s.jsx(n,{variant:"error",className:"mb-4 flex-shrink-0",dismissible:!0,onDismiss:()=>F(null),children:z}),s.jsx("div",{className:"flex-1 flex",children:s.jsx(p,{mapComponent:s.jsx("div",{className:"h-full w-full",children:$}),sidebarComponent:s.jsx("div",{className:"h-full",children:O})})})]})},k=({product:e,className:t="",...n})=>e?s.jsx(l,{className:`w-full ${t}`,variant:"white",hover:!1,...n,children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.image_url&&s.jsx("div",{className:"sm:w-1/3 flex-shrink-0",children:s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-28 sm:h-32 md:h-full object-cover rounded-t-lg sm:rounded-l-lg sm:rounded-t-none"})}),s.jsxs("div",{className:"p-3 sm:p-4 flex-1 "+(e.image_url?"sm:w-2/3":"sm:w-full"),children:[s.jsxs("div",{className:"flex justify-between items-start mb-1 sm:mb-2",children:[s.jsx("h3",{className:"text-base sm:text-lg font-display text-lemonade-blue-dark truncate max-w-[70%]",children:e.name}),s.jsxs(a,{variant:"yellow",className:"ml-2 text-xs sm:text-sm whitespace-nowrap",children:["$",parseFloat(e.price).toFixed(2)]})]}),e.description&&s.jsx("p",{className:"text-gray-700 text-xs sm:text-sm line-clamp-3",children:e.description}),s.jsx("div",{className:"flex justify-start items-center mt-2",children:!1===e.is_available?s.jsx(a,{variant:"red",className:"text-xs",children:"Sold Out"}):s.jsx(a,{variant:"green",className:"text-xs",children:"Available"})})]})]})}):null;k.propTypes={product:e.shape({id:e.string,name:e.string.isRequired,description:e.string,price:e.oneOfType([e.number,e.string]).isRequired,image_url:e.string,is_available:e.bool}).isRequired,className:e.string};const _=({stands:e=[],loading:a=!1,selectedStand:d=null,onStandSelect:c,onStandClose:u,userLocation:h=null,className:f="",...g})=>{const[p,y]=o.useState(e),[N,w]=o.useState(null),[S,_]=o.useState(""),[L,C]=o.useState(!1),[R,z]=o.useState([]),[F,M]=o.useState(!1),[q,A]=o.useState(null);o.useEffect((()=>{let s=[...e];if(null!==N&&h&&(s=j(s,N)),S.trim()){const e=S.toLowerCase();s=s.filter((s=>s.name.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e)||s.address&&s.address.toLowerCase().includes(e)))}y(s)}),[e,N,S,h]),o.useEffect((()=>{if(d){M(!0),A(null);(async()=>{try{const{data:e,error:s}=await b(d.id);s?A("Failed to load products. Please try again later."):z(e||[])}catch(e){A("An unexpected error occurred. Please try again later.")}finally{M(!1)}})()}else z([])}),[d]);const $=()=>{w(null),_("")};return s.jsx("div",{className:`flex flex-col h-full ${f}`,...g,children:d?s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(v,{stand:d,onClose:u,className:"mb-4"}),s.jsxs(l,{className:"flex-grow overflow-auto",children:[s.jsx(l.Header,{children:s.jsx("h3",{className:"text-xl font-display text-lemonade-blue-dark",children:"Products"})}),s.jsx(l.Body,{children:F?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(i,{variant:"yellow"})}):q?s.jsx(n,{variant:"error",children:q}):R.length>0?s.jsx("div",{className:"space-y-4",children:R.map((e=>s.jsx(k,{product:e},e.id)))}):s.jsx("p",{className:"text-center py-4 text-gray-500",children:"No products available for this stand."})})]})]}):s.jsxs(l,{className:"h-full flex flex-col",children:[s.jsx(l.Header,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-display text-lemonade-blue-dark",children:"Lemonade Stands"}),s.jsx(t,{variant:"outline",size:"sm",onClick:()=>{C((e=>!e))},children:L?"Hide Filters":"Show Filters"})]})}),L&&s.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[s.jsxs(r.Group,{children:[s.jsx(r.Label,{htmlFor:"search",children:"Search"}),s.jsx(r.Input,{id:"search",placeholder:"Search by name or address",value:S,onChange:e=>{_(e.target.value)}})]}),s.jsxs(r.Group,{children:[s.jsxs(r.Label,{htmlFor:"distance",children:["Maximum Distance (",h?"miles":"unavailable",")"]}),s.jsx(r.Select,{id:"distance",value:N||"",onChange:e=>{const s=e.target.value;w(""===s?null:parseFloat(s))},disabled:!h,options:[{value:"",label:"Any distance"},{value:"1",label:"1 mile"},{value:"5",label:"5 miles"},{value:"10",label:"10 miles"},{value:"25",label:"25 miles"},{value:"50",label:"50 miles"}]}),!h&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable location services to filter by distance"})]}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx(t,{variant:"ghost",size:"sm",onClick:$,children:"Reset Filters"})})]}),s.jsx(l.Body,{className:"flex-grow overflow-auto",children:a?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(i,{variant:"yellow"})}):p.length>0?s.jsx("div",{className:"space-y-4",children:p.map((e=>s.jsxs("div",{className:"p-3 bg-lemonade-yellow-light rounded-lg cursor-pointer hover:bg-lemonade-yellow-dark transition-colors",onClick:()=>c(e),children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-display text-lg",children:e.name}),null!==e.distance&&void 0!==e.distance&&s.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded-full",children:x(e.distance,"miles")})]}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:e.address}),null!==e.distance&&void 0!==e.distance&&s.jsx("span",{className:"text-xs font-medium text-lemonade-blue-dark",children:m(e.distance)})]})]},e.id)))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No lemonade stands found."}),(null!==N||S)&&s.jsx(t,{variant:"ghost",size:"sm",onClick:$,className:"mt-2",children:"Clear Filters"})]})}),s.jsx(l.Footer,{children:s.jsxs("p",{className:"text-sm text-gray-600",children:[p.length," ",1===p.length?"stand":"stands"," found",null!==N&&h&&` within ${N} miles`]})})]})})};_.propTypes={stands:e.arrayOf(e.shape({id:e.string.isRequired,name:e.string.isRequired,description:e.string,address:e.string,location_lat:e.number,location_lng:e.number,image_url:e.string,distance:e.number})),loading:e.bool,selectedStand:e.object,onStandSelect:e.func.isRequired,onStandClose:e.func.isRequired,userLocation:e.shape({lat:e.number.isRequired,lng:e.number.isRequired}),className:e.string};const L=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),C=["Easily find young entrepreneurs near you","Real-time updates and locations","Community reviews and ratings","Support children learning business skills","Turn everyday walks into fun adventures"],R=()=>{const{isAuthenticated:e,initializing:l}=g();return s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-yellow-50 to-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-8 bg-white rounded-xl shadow-lg overflow-hidden",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/2 p-6 md:p-8",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-lemonade-blue-dark mb-4",children:"Welcome to Lemonade Map!"}),s.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Discover and support young entrepreneurs in your neighborhood. From refreshing lemonade stands to creative crafts, we're putting kids' first businesses on the map!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsx(c,{to:e?"/seller/dashboard":"/login",className:"bg-lemonade-yellow hover:bg-yellow-400 text-lemonade-blue-dark font-bold py-3 px-6 rounded-lg text-center transition-colors duration-200",children:"Add Your Stand"}),s.jsx(c,{to:"/about",className:"bg-lemonade-blue-dark hover:bg-lemonade-blue text-white font-bold py-3 px-6 rounded-lg text-center transition-colors duration-200",children:"Learn More"})]})]}),s.jsx("div",{className:"md:w-1/2 bg-yellow-100 p-6 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-md w-full\n                              flex flex-col md:flex-row items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-lemonade-blue-dark mb-4 flex items-center",children:[s.jsx("span",{className:"text-yellow-500 text-3xl mr-2",children:"★"}),"Why Lemonade Map?"]}),s.jsx("ul",{className:"space-y-3",children:C.map((e=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-yellow-500 text-lg mr-2",children:"•"}),s.jsx("span",{className:"text-gray-700",children:e})]},e)))})]}),s.jsx("div",{className:"mt-6 md:mt-0 md:ml-6 flex-shrink-0 mx-auto",children:s.jsx("img",{src:"/images/markers/lemonade-map-logo.png",alt:"Lemonade Map Logo",className:"w-64 h-64 object-contain mx-auto"})})]})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-8",children:s.jsx("div",{className:"h-[100%] rounded-lg overflow-hidden p-4",children:s.jsx(S,{mapHeight:"100%"})})}),s.jsxs("div",{className:"bg-yellow-100 rounded-xl p-6 text-center",children:[s.jsx("h2",{className:"text-2xl font-display font-bold text-lemonade-blue-dark mb-4",children:"Ready to Join Our Community?"}),s.jsx("p",{className:"text-gray-700 mb-6 max-w-2xl mx-auto",children:"Whether you're a young entrepreneur looking to promote your stand or a community member eager to support local kids, Lemonade Map is for you!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(c,{to:e?"/seller/dashboard":"/login",className:"bg-lemonade-yellow hover:bg-yellow-400 text-lemonade-blue-dark font-bold py-3 px-6 rounded-lg",children:"Add Your Stand"}),s.jsx(c,{to:"/about",className:"bg-lemonade-blue-dark hover:bg-lemonade-blue text-white font-bold py-3 px-6 rounded-lg",children:"Learn More"})]})]})]})})};export{R as default};
//# sourceMappingURL=HomePage-CyYYG_3t.js.map
