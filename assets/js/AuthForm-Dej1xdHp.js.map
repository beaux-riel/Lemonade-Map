{"version":3,"file":"AuthForm-Dej1xdHp.js","sources":["../../../src/components/auth/AuthForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { signIn, signUp, signOut } from '../../api/supabaseApi';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Form, Button, Alert } from '../ui';\nimport { useNavigate } from 'react-router-dom';\n\nconst AuthForm = ({ initialMode = 'login' }) => {\n  const { user, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [mode, setMode] = useState(initialMode); // 'login' or 'register'\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    fullName: '',\n  });\n  \n  // Handle input change\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n  \n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n    \n    try {\n      if (mode === 'login') {\n        // Login\n        const { data, error } = await signIn(formData.email, formData.password);\n        \n        if (error) {\n          throw new Error(error.message);\n        }\n        \n        setSuccess('Logged in successfully!');\n        // Redirect to dashboard after successful login\n        navigate('/seller/dashboard');\n      } else {\n        // Register\n        const { data, error } = await signUp(\n          formData.email, \n          formData.password, \n          formData.fullName\n        );\n        \n        if (error) {\n          throw new Error(error.message);\n        }\n        \n        setSuccess('Registration successful! Please check your email to confirm your account.');\n      }\n      \n      // Reset form\n      setFormData({\n        email: '',\n        password: '',\n        fullName: '',\n      });\n    } catch (err) {\n      console.error('Auth error:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Handle logout\n  const handleLogout = async () => {\n    setLoading(true);\n    \n    try {\n      const { error } = await signOut();\n      \n      if (error) {\n        throw new Error(error.message);\n      }\n      \n      setSuccess('Logged out successfully!');\n    } catch (err) {\n      console.error('Logout error:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Toggle between login and register\n  const toggleMode = () => {\n    setMode(mode === 'login' ? 'register' : 'login');\n    setError(null);\n    setSuccess(null);\n  };\n  \n  // If user is authenticated, show profile\n  if (isAuthenticated) {\n    return (\n      <div className=\"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md\">\n        <h2 className=\"text-2xl font-display text-lemonade-blue-dark mb-4\">\n          Your Profile\n        </h2>\n        \n        {error && (\n          <Alert \n            variant=\"error\" \n            className=\"mb-4\"\n            dismissible\n            onDismiss={() => setError(null)}\n          >\n            {error}\n          </Alert>\n        )}\n        \n        {success && (\n          <Alert \n            variant=\"success\" \n            className=\"mb-4\"\n            dismissible\n            onDismiss={() => setSuccess(null)}\n          >\n            {success}\n          </Alert>\n        )}\n        \n        <div className=\"mb-4\">\n          <p className=\"text-gray-700\">\n            <strong>Email:</strong> {user.email}\n          </p>\n          {user.user_metadata?.full_name && (\n            <p className=\"text-gray-700\">\n              <strong>Name:</strong> {user.user_metadata.full_name}\n            </p>\n          )}\n        </div>\n        \n        <Button\n          variant=\"primary\"\n          onClick={handleLogout}\n          disabled={loading}\n          className=\"w-full\"\n        >\n          {loading ? 'Logging out...' : 'Log Out'}\n        </Button>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"max-w-md mx-auto p-6 bg-white rounded-xl shadow-md\">\n      <h2 className=\"text-2xl font-display text-lemonade-blue-dark mb-4\">\n        {mode === 'login' ? 'Log In' : 'Create an Account'}\n      </h2>\n      \n      {error && (\n        <Alert \n          variant=\"error\" \n          className=\"mb-4\"\n          dismissible\n          onDismiss={() => setError(null)}\n        >\n          {error}\n        </Alert>\n      )}\n      \n      {success && (\n        <Alert \n          variant=\"success\" \n          className=\"mb-4\"\n          dismissible\n          onDismiss={() => setSuccess(null)}\n        >\n          {success}\n        </Alert>\n      )}\n      \n      <Form onSubmit={handleSubmit}>\n        {mode === 'register' && (\n          <Form.Group>\n            <Form.Label htmlFor=\"fullName\" required>\n              Full Name\n            </Form.Label>\n            <Form.Input\n              id=\"fullName\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleInputChange}\n              placeholder=\"Enter your full name\"\n              required\n            />\n          </Form.Group>\n        )}\n        \n        <Form.Group>\n          <Form.Label htmlFor=\"email\" required>\n            Email\n          </Form.Label>\n          <Form.Input\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            value={formData.email}\n            onChange={handleInputChange}\n            placeholder=\"Enter your email\"\n            required\n          />\n        </Form.Group>\n        \n        <Form.Group>\n          <Form.Label htmlFor=\"password\" required>\n            Password\n          </Form.Label>\n          <Form.Input\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            value={formData.password}\n            onChange={handleInputChange}\n            placeholder=\"Enter your password\"\n            required\n          />\n        </Form.Group>\n        \n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          disabled={loading}\n          className=\"w-full mb-4\"\n        >\n          {loading \n            ? (mode === 'login' ? 'Logging in...' : 'Registering...') \n            : (mode === 'login' ? 'Log In' : 'Register')}\n        </Button>\n        \n        <div className=\"text-center\">\n          <button\n            type=\"button\"\n            onClick={toggleMode}\n            className=\"text-lemonade-blue hover:underline\"\n          >\n            {mode === 'login' \n              ? \"Don't have an account? Register\" \n              : \"Already have an account? Log in\"}\n          </button>\n        </div>\n      </Form>\n    </div>\n  );\n};\n\nexport default AuthForm;"],"names":["AuthForm","initialMode","user","isAuthenticated","useAuth","navigate","useNavigate","mode","setMode","useState","loading","setLoading","error","setError","success","setSuccess","formData","setFormData","email","password","fullName","handleInputChange","e","name","value","target","prev","handleLogout","async","signOut","Error","message","err","jsxs","className","children","jsx","jsxRuntimeExports","Alert","variant","dismissible","onDismiss","_a","user_metadata","full_name","Button","onClick","disabled","Form","onSubmit","preventDefault","data","signIn","signUp","Group","Label","htmlFor","required","Input","id","onChange","placeholder","type"],"mappings":"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"}