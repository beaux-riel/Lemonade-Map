{"version":3,"file":"SellerDashboardPage-D41H0U1-.js","sources":["../../../src/pages/SellerDashboardPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { getUserStands, createStand, getAllProducts, getProducts } from '../api/supabaseApi';\nimport { Link } from 'react-router-dom';\nimport { Button, Alert, Tabs, Card } from '../components/ui';\n\n/**\n * Seller Dashboard page component\n * @returns {JSX.Element} - Seller Dashboard page component\n */\nconst SellerDashboardPage = () => {\n  const { user } = useAuth();\n  const [stands, setStands] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState('stands');\n  \n  // Fetch user's stands and products\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        \n        // Fetch stands\n        const { data: standsData, error: standsError } = await getUserStands(user.id);\n        \n        if (standsError) {\n          throw new Error(standsError.message);\n        }\n        \n        setStands(standsData || []);\n        \n        // Fetch all products for user's stands\n        if (standsData && standsData.length > 0) {\n          const standIds = standsData.map(stand => stand.id);\n          \n          // Get all products for all stands\n          const userProducts = [];\n          \n          for (const standId of standIds) {\n            const { data: productsData, error: productsError } = await getProducts(standId);\n            \n            if (productsError) {\n              console.error('Error fetching products for stand:', standId, productsError);\n              continue;\n            }\n            \n            if (productsData && productsData.length > 0) {\n              // Add stand information to each product\n              const productsWithStandInfo = productsData.map(product => ({\n                ...product,\n                stand_name: standsData.find(s => s.id === product.stand_id)?.name || 'Unknown Stand'\n              }));\n              \n              userProducts.push(...productsWithStandInfo);\n            }\n          }\n          \n          setProducts(userProducts);\n        }\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError('Failed to load your data. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, [user.id]);\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-display text-lemonade-blue-dark mb-2\">\n          Seller Dashboard\n        </h1>\n        <p className=\"text-gray-600\">\n          Manage your lemonade stands and products\n        </p>\n      </div>\n      \n      {error && (\n        <Alert \n          variant=\"error\" \n          className=\"mb-6\"\n          dismissible\n          onDismiss={() => setError(null)}\n        >\n          {error}\n        </Alert>\n      )}\n      \n      {/* Tabs */}\n      <Tabs\n        activeTab={activeTab}\n        onChange={setActiveTab}\n        tabs={[\n          { id: 'stands', label: 'My Stands' },\n          { id: 'products', label: 'My Products' }\n        ]}\n        className=\"mb-6\"\n      />\n      \n      {/* Stands Tab */}\n      {activeTab === 'stands' && (\n        <div className=\"bg-white rounded-xl shadow-md p-6 mb-8\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-display text-lemonade-blue-dark\">\n              Your Lemonade Stands\n            </h2>\n            <Link to=\"/seller/stands/new\">\n              <Button variant=\"primary\">\n                Add New Stand\n              </Button>\n            </Link>\n          </div>\n          \n          {loading ? (\n            <div className=\"flex justify-center py-8\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lemonade-blue\"></div>\n            </div>\n          ) : stands.length === 0 ? (\n            <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n              <p className=\"text-gray-600 mb-4\">You don't have any lemonade stands yet.</p>\n              <Link to=\"/seller/stands/new\">\n                <Button variant=\"primary\">\n                  Create Your First Stand\n                </Button>\n              </Link>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {stands.map((stand) => (\n                <div key={stand.id} className=\"border rounded-lg overflow-hidden hover:shadow-md transition\">\n                  {stand.image_url ? (\n                    <img \n                      src={stand.image_url} \n                      alt={stand.name} \n                      className=\"w-full h-48 object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-48 bg-lemonade-yellow-light flex items-center justify-center\">\n                      <span className=\"text-lemonade-yellow-dark\">No Image</span>\n                    </div>\n                  )}\n                  <div className=\"p-4\">\n                    <h3 className=\"text-xl font-display text-lemonade-blue-dark mb-2\">\n                      {stand.name}\n                    </h3>\n                    <p className=\"text-gray-600 mb-3 line-clamp-2\">\n                      {stand.description || 'No description'}\n                    </p>\n                    <div className=\"flex justify-between items-center\">\n                      <span className={`px-2 py-1 rounded-full text-xs ${\n                        stand.is_active \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {stand.is_active ? 'Active' : 'Inactive'}\n                      </span>\n                      <Link \n                        to={`/seller/stands/${stand.id}`}\n                        className=\"text-lemonade-blue hover:underline\"\n                      >\n                        Manage â†’\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n      \n      {/* Products Tab */}\n      {activeTab === 'products' && (\n        <div className=\"bg-white rounded-xl shadow-md p-6 mb-8\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-display text-lemonade-blue-dark\">\n              Your Products\n            </h2>\n            {stands.length > 0 && (\n              <div className=\"flex space-x-2\">\n                <select \n                  className=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lemonade-blue\"\n                  onChange={(e) => {\n                    if (e.target.value) {\n                      window.location.href = `/seller/stands/${e.target.value}/products/new`;\n                    }\n                  }}\n                  defaultValue=\"\"\n                >\n                  <option value=\"\" disabled>Select a stand...</option>\n                  {stands.map(stand => (\n                    <option key={stand.id} value={stand.id}>\n                      {stand.name}\n                    </option>\n                  ))}\n                </select>\n                <Button \n                  variant=\"primary\"\n                  onClick={() => {\n                    const select = document.querySelector('select');\n                    if (select.value) {\n                      window.location.href = `/seller/stands/${select.value}/products/new`;\n                    } else {\n                      alert('Please select a stand first');\n                    }\n                  }}\n                >\n                  Add New Product\n                </Button>\n              </div>\n            )}\n          </div>\n          \n          {loading ? (\n            <div className=\"flex justify-center py-8\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lemonade-blue\"></div>\n            </div>\n          ) : products.length === 0 ? (\n            <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n              <p className=\"text-gray-600 mb-4\">\n                {stands.length === 0 \n                  ? \"You need to create a stand before adding products.\" \n                  : \"You don't have any products yet.\"}\n              </p>\n              {stands.length === 0 ? (\n                <Link to=\"/seller/stands/new\">\n                  <Button variant=\"primary\">\n                    Create Your First Stand\n                  </Button>\n                </Link>\n              ) : (\n                <Link to={`/seller/stands/${stands[0].id}/products/new`}>\n                  <Button variant=\"primary\">\n                    Add Your First Product\n                  </Button>\n                </Link>\n              )}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {products.map((product) => (\n                <Card key={product.id} className=\"hover:shadow-md transition\">\n                  <div className=\"h-48 bg-gray-100\">\n                    {product.image_url ? (\n                      <img\n                        src={product.image_url}\n                        alt={product.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-lemonade-yellow-light flex items-center justify-center\">\n                        <span className=\"text-lemonade-yellow-dark\">No Image</span>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"p-4\">\n                    <h3 className=\"text-xl font-display text-lemonade-blue-dark mb-1\">\n                      {product.name}\n                    </h3>\n                    <p className=\"text-sm text-lemonade-blue mb-2\">\n                      {product.stand_name}\n                    </p>\n                    <p className=\"text-gray-600 mb-2 line-clamp-2\">\n                      {product.description || 'No description'}\n                    </p>\n                    <p className=\"text-lg font-semibold text-lemonade-blue-dark mb-3\">\n                      ${parseFloat(product.price).toFixed(2)}\n                    </p>\n                    <div className=\"flex justify-between items-center\">\n                      <span className={`px-2 py-1 rounded-full text-xs ${\n                        product.is_available \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {product.is_available ? 'Available' : 'Unavailable'}\n                      </span>\n\n                      <Link\n                        to={`/seller/stands/${product.stand_id}/products/${product.id}`}\n                        className=\"text-lemonade-blue hover:underline\"\n                      >\n                        Edit â†’\n                      </Link>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SellerDashboardPage;"],"names":["SellerDashboardPage","user","useAuth","stands","setStands","useState","products","setProducts","loading","setLoading","error","setError","activeTab","setActiveTab","useEffect","async","data","standsData","standsError","getUserStands","id","Error","message","length","standIds","map","stand","userProducts","standId","productsData","productsError","getProducts","productsWithStandInfo","product","stand_name","_a","find","s","stand_id","name","push","err","fetchData","jsxs","className","children","jsx","jsxRuntimeExports","Alert","variant","dismissible","onDismiss","Tabs","onChange","tabs","label","Link","to","Button","image_url","src","alt","description","is_active","e","target","value","window","location","href","defaultValue","disabled","onClick","select","document","querySelector","alert","Card","parseFloat","price","toFixed","is_available"],"mappings":"0NAUA,MAAMA,EAAsB,KACpB,MAAAC,KAAEA,GAASC,KACVC,EAAQC,GAAaC,EAAAA,SAAS,KAC9BC,EAAUC,GAAeF,EAAAA,SAAS,KAClCG,EAASC,GAAcJ,EAAAA,UAAS,IAChCK,EAAOC,GAAYN,EAAAA,SAAS,OAC5BO,EAAWC,GAAgBR,EAAAA,SAAS,UAyDzC,OAtDFS,EAAAA,WAAU,KACUC,WACZ,IACFN,GAAW,GAGL,MAAEO,KAAMC,EAAYP,MAAOQ,SAAsBC,EAAclB,EAAKmB,IAE1E,GAAIF,EACI,MAAA,IAAIG,MAAMH,EAAYI,SAM1B,GAHMlB,EAAAa,GAAc,IAGpBA,GAAcA,EAAWM,OAAS,EAAG,CACvC,MAAMC,EAAWP,EAAWQ,KAAIC,GAASA,EAAMN,KAGzCO,EAAe,GAErB,IAAA,MAAWC,KAAWJ,EAAU,CACxB,MAAER,KAAMa,EAAcnB,MAAOoB,SAAwBC,EAAYH,GAEvE,IAAIE,IAKAD,GAAgBA,EAAaN,OAAS,GAAG,CAErC,MAAAS,EAAwBH,EAAaJ,KAAgBQ,UAAA,MAAA,IACtDA,EACHC,YAAY,OAAAC,EAAWlB,EAAAmB,MAAKC,GAAKA,EAAEjB,KAAOa,EAAQK,iBAAtC,EAAAH,EAAiDI,OAAQ,gBAAA,IAG1DZ,EAAAa,QAAQR,EAAqB,CAC5C,CAGFzB,EAAYoB,EAAY,QAEnBc,GAEP9B,EAAS,8CAA6C,CACtD,QACAF,GAAW,EAAK,GAIViC,EAAA,GACT,CAACzC,EAAKmB,OAGPuB,KAAC,MAAI,CAAAC,UAAU,8BACbC,SAAA,GAACF,KAAA,MAAA,CAAIC,UAAU,OACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,qDAAqDC,SAEnE,qBACCC,EAAAA,IAAA,IAAA,CAAEF,UAAU,gBAAgBC,SAE7B,gDAGDnC,GACCqC,EAAAD,IAACE,EAAA,CACCC,QAAQ,QACRL,UAAU,OACVM,aAAW,EACXC,UAAW,IAAMxC,EAAS,MAEzBkC,SAAAnC,IAKLqC,EAAAD,IAACM,EAAA,CACCxC,YACAyC,SAAUxC,EACVyC,KAAM,CACJ,CAAElC,GAAI,SAAUmC,MAAO,aACvB,CAAEnC,GAAI,WAAYmC,MAAO,gBAE3BX,UAAU,SAIG,WAAdhC,UACE,MAAA,CAAIgC,UAAU,yCACbC,SAAA,GAACF,KAAA,MAAA,CAAIC,UAAU,yCACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,gDAAgDC,SAE9D,2BACAC,IAACU,GAAKC,GAAG,qBACPZ,eAACa,EAAO,CAAAT,QAAQ,UAAUJ,SAAA,uBAM7BrC,EACEsC,EAAAA,IAAA,MAAA,CAAIF,UAAU,2BACbC,eAAC,MAAI,CAAAD,UAAU,qFAEG,IAAlBzC,EAAOoB,cACR,MAAA,CAAIqB,UAAU,yCACbC,SAAA,CAACC,EAAAA,IAAA,IAAA,CAAEF,UAAU,qBAAqBC,SAAuC,8CACzEC,IAACU,GAAKC,GAAG,qBACPZ,eAACa,EAAO,CAAAT,QAAQ,UAAUJ,SAAA,iCAM9BC,EAAAA,IAAC,MAAI,CAAAF,UAAU,uDACZC,SAAA1C,EAAOsB,KAAKC,UACV,MAAmB,CAAAkB,UAAU,+DAC3BC,SAAA,CAAAnB,EAAMiC,UACLZ,EAAAD,IAAC,MAAA,CACCc,IAAKlC,EAAMiC,UACXE,IAAKnC,EAAMa,KACXK,UAAU,6BAGXG,EAAAD,IAAA,MAAA,CAAIF,UAAU,wEACbC,eAAC,OAAK,CAAAD,UAAU,4BAA4BC,SAAA,iBAGhDF,KAAC,MAAI,CAAAC,UAAU,MACbC,SAAA,CAAAC,EAAAA,IAAC,KAAG,CAAAF,UAAU,oDACXC,SAAAnB,EAAMa,aAER,IAAE,CAAAK,UAAU,kCACVC,SAAAnB,EAAMoC,aAAe,qBAExBnB,KAAC,MAAI,CAAAC,UAAU,oCACbC,SAAA,GAACC,IAAA,OAAA,CAAKF,UAAW,mCACflB,EAAMqC,UACF,8BACA,6BAEHlB,SAAAnB,EAAMqC,UAAY,SAAW,aAEhChB,EAAAD,IAACU,EAAA,CACCC,GAAI,kBAAkB/B,EAAMN,KAC5BwB,UAAU,qCACXC,SAAA,qBA9BGnB,EAAMN,WA2CX,aAAdR,UACE,MAAA,CAAIgC,UAAU,yCACbC,SAAA,GAACF,KAAA,MAAA,CAAIC,UAAU,yCACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,gDAAgDC,SAE9D,kBACC1C,EAAOoB,OAAS,GACdoB,EAAAA,KAAA,MAAA,CAAIC,UAAU,iBACbC,SAAA,CAAAE,EAAAJ,KAAC,SAAA,CACCC,UAAU,uGACVS,SAAWW,IACLA,EAAEC,OAAOC,QACXC,OAAOC,SAASC,KAAO,kBAAkBL,EAAEC,OAAOC,qBAAK,EAG3DI,aAAa,GAEbzB,SAAA,CAAAC,MAAC,SAAO,CAAAoB,MAAM,GAAGK,UAAQ,EAAC1B,SAAiB,sBAC1C1C,EAAOsB,KACNC,GAAAoB,EAAAA,IAAC,SAAsB,CAAAoB,MAAOxC,EAAMN,GACjCyB,SAAMnB,EAAAa,MADIb,EAAMN,SAKvB2B,EAAAD,IAACY,EAAA,CACCT,QAAQ,UACRuB,QAAS,KACD,MAAAC,EAASC,SAASC,cAAc,UAClCF,EAAOP,MACTC,OAAOC,SAASC,KAAO,kBAAkBI,EAAOP,qBAEhDU,MAAM,8BAA6B,EAGxC/B,SAAA,0BAONrC,EACEsC,EAAAA,IAAA,MAAA,CAAIF,UAAU,2BACbC,eAAC,MAAI,CAAAD,UAAU,qFAEK,IAApBtC,EAASiB,cACV,MAAA,CAAIqB,UAAU,yCACbC,SAAA,CAAAC,EAAAA,IAAC,KAAEF,UAAU,qBACVC,SAAkB,MAAXtB,OACJ,qDACA,qCAEa,IAAlBpB,EAAOoB,OACNuB,EAAAA,IAACU,EAAK,CAAAC,GAAG,qBACPZ,WAAAC,IAACY,EAAO,CAAAT,QAAQ,UAAUJ,SAAA,gCAK3BC,IAAAU,EAAA,CAAKC,GAAI,kBAAkBtD,EAAO,GAAGiB,kBACpCyB,WAAAC,IAACY,EAAO,CAAAT,QAAQ,UAAUJ,SAAA,gCAOhCC,EAAAA,IAAC,MAAI,CAAAF,UAAU,uDACZC,SAAAvC,EAASmB,KAAKQ,UACZ4C,EAAsB,CAAAjC,UAAU,6BAC/BC,SAAA,CAAAC,EAAAA,IAAC,MAAI,CAAAF,UAAU,mBACZC,SAAAZ,EAAQ0B,UACPZ,EAAAD,IAAC,MAAA,CACCc,IAAK3B,EAAQ0B,UACbE,IAAK5B,EAAQM,KACbK,UAAU,iCAGXE,IAAA,MAAA,CAAIF,UAAU,0EACbC,SAACE,EAAAD,IAAA,OAAA,CAAKF,UAAU,4BAA4BC,SAAQ,mBAI1DF,KAAC,MAAI,CAAAC,UAAU,MACbC,SAAA,CAAAC,EAAAA,IAAC,KAAG,CAAAF,UAAU,oDACXC,SAAAZ,EAAQM,OAEVO,EAAAA,IAAA,IAAA,CAAEF,UAAU,kCACVC,WAAQX,mBAEV,IAAE,CAAAU,UAAU,kCACVC,SAAAZ,EAAQ6B,aAAe,qBAE1BnB,KAAC,IAAE,CAAAC,UAAU,qDAAqDC,SAAA,CAAA,IAC9DiC,WAAW7C,EAAQ8C,OAAOC,QAAQ,QAEtCrC,KAAC,MAAI,CAAAC,UAAU,oCACbC,SAAA,GAACC,IAAA,OAAA,CAAKF,UAAW,mCACfX,EAAQgD,aACJ,8BACA,6BAEHpC,SAAAZ,EAAQgD,aAAe,YAAc,gBAGxClC,EAAAD,IAACU,EAAA,CACCC,GAAI,kBAAkBxB,EAAQK,qBAAqBL,EAAQb,KAC3DwB,UAAU,qCACXC,SAAA,mBAvCIZ,EAAQb,aAkD/B"}